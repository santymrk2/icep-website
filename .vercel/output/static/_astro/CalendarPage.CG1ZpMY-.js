import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.BVOCwoKb.js";import{L as A,m as d}from"./lenis.C4viSG1Y.js";import{E as $}from"./EventDetails.DL2NP5aP.js";function I(n,t){const i=new Date(n,t+1,0),a=[];for(let l=1;l<=i.getDate();l++)a.push(new Date(n,t,l));return a}function y(n,t){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()}const O=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 12H7m0 0 4 4m-4-4 4-4"})}),P=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12h10m0 0-4-4m4 4-4 4"})});function z(){const n=new Date,[t,i]=o.useState(n.getMonth()),[a,l]=o.useState(n.getFullYear()),[b,j]=o.useState([]),[u,m]=o.useState(null),[v,x]=o.useState(!1),[h,f]=o.useState([]);o.useEffect(()=>{x(!0),fetch(`/api/events?year=${a}&month=${t}`).then(s=>s.json()).then(s=>j(s)).finally(()=>x(!1))},[t,a]);const c={};b.forEach(s=>{if(s.startDate){const r=s.startDate.slice(0,10);c[r]||(c[r]=[]),c[r].push(s)}});const w=I(a,t),N=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],D=new Date(a,t,1).getDay(),M=Array(D).fill(null);function k(){t===n.getMonth()&&a===n.getFullYear()||(t===0?(i(11),l(a-1)):i(t-1),m(null))}function E(){t===11?(i(0),l(a+1)):i(t+1),m(null)}const S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],g=t===n.getMonth()&&a===n.getFullYear();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-fit mx-auto rounded-xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:k,className:`p-2 rounded-full m-1 font-bold transition-all flex items-center justify-center ${g?"bg-neutral-700 text-neutral-400 cursor-not-allowed":"bg-[#3b82f6] text-white hover:bg-[#2563eb]"}`,disabled:g,"aria-label":"Mes anterior",children:e.jsx(O,{})}),e.jsxs("h2",{className:"mx-8 text-xl font-bold text-center text-white",children:[S[t]," ",a]}),e.jsx("button",{onClick:E,className:"p-2 rounded-full m-1 font-bold bg-[#3b82f6] text-white hover:bg-[#2563eb] transition-all flex items-center justify-center","aria-label":"Mes siguiente",children:e.jsx(P,{})})]}),v?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("span",{className:"relative flex items-center justify-center h-6 w-6",children:[e.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"animate-ping inline-flex h-4 w-4 rounded-full bg-[#3b82f6] opacity-60"})}),e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-[#3b82f6] animate-pulse"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-3 mb-3",children:N.map(s=>e.jsx("div",{className:"text-center font-bold h-8 flex items-center justify-center text-sm",children:s}))}),e.jsxs("div",{className:"grid grid-cols-7 gap-3 place-items-center",children:[M.map((s,r)=>e.jsx("div",{className:"h-8 w-8"},"b"+r)),w.map(s=>{const r=s.toISOString().slice(0,10),C=!!c[r],F=y(s,n),L=u&&y(s,u);return e.jsx("button",{className:`rounded-full size-8 p-6 flex flex-col items-center justify-center transition-all
                    ${L?"bg-primary text-white":C?"border border-gray-200 hover:text-primary hover:bg-white":"hover:bg-neutral-700"}
                    ${F?"text-primary":""}
                  `,onClick:()=>{const Y=s.toISOString().slice(0,10),p=c[Y]||[];p.length&&f(p)},children:e.jsx("span",{className:"font-bold",children:s.getDate()})},r)})]})]})]}),h.length>0&&e.jsx($,{events:h,onClose:()=>f([])})]})}const V=()=>(o.useEffect(()=>{const n=new A({duration:1.2,easing:i=>Math.min(1,1.001-Math.pow(2,-10*i))});function t(i){n.raf(i),requestAnimationFrame(t)}return requestAnimationFrame(t),()=>{n.destroy()}},[]),e.jsx(d.section,{className:"py-16 mb-36",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(d.h1,{className:"text-3xl font-bold mb-6 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:"Calendario de Eventos"}),e.jsx(d.p,{className:"mb-10 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:"Visualiza todos nuestros eventos programados."}),e.jsx(d.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:e.jsx(z,{})})]})}));export{V as default};
