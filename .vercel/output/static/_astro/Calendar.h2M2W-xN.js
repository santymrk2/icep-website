import{d,y as S}from"./hooks.module.C9dviYOk.js";import{u as e}from"./jsxRuntime.module.WU2TYQru.js";import{k as Y}from"./preact.module.URMqeND2.js";function C(l,n){const i=new Date(l,n+1,0),r=[];for(let o=1;o<=i.getDate();o++)r.push(new Date(l,n,o));return r}function g(l,n){return l.getFullYear()===n.getFullYear()&&l.getMonth()===n.getMonth()&&l.getDate()===n.getDate()}const F=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 12H7m0 0 4 4m-4-4 4-4"})}),E=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12h10m0 0-4-4m4 4-4 4"})});function N(){const l=new Date,[n,i]=d(l.getMonth()),[r,o]=d(l.getFullYear()),[m,p]=d([]),[a,h]=d(null),[x,f]=d(!1);S(()=>{f(!0),fetch(`/api/events?year=${r}&month=${n}`).then(t=>t.json()).then(t=>p(t)).finally(()=>f(!1))},[n,r]);const c={};m.forEach(t=>{if(t.startDate){const s=t.startDate.slice(0,10);c[s]||(c[s]=[]),c[s].push(t)}});const y=C(r,n),w=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],k=new Date(r,n,1).getDay(),v=Array(k).fill(null);function D(){n===l.getMonth()&&r===l.getFullYear()||(n===0?(i(11),o(r-1)):i(n-1),h(null))}function M(){n===11?(i(0),o(r+1)):i(n+1),h(null)}const j=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],b=n===l.getMonth()&&r===l.getFullYear();return e("div",{class:"w-full max-w-2xl mx-auto bg-zinc-800 rounded-xl shadow-lg p-6",children:[e("div",{class:"flex justify-between items-center mb-4",children:[e("button",{onClick:D,class:`px-2 py-1 rounded font-bold transition-all flex items-center justify-center ${b?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-[#3b82f6] text-white hover:bg-[#2563eb]"}`,disabled:b,"aria-label":"Mes anterior",children:e(F,{})}),e("h2",{class:"text-xl font-bold text-center text-white",children:[j[n]," ",r]}),e("button",{onClick:M,class:"px-2 py-1 rounded font-bold bg-[#3b82f6] text-white hover:bg-[#2563eb] transition-all flex items-center justify-center","aria-label":"Mes siguiente",children:e(E,{})})]}),x?e("div",{class:"flex justify-center items-center py-12",children:e("span",{class:"relative flex items-center justify-center h-6 w-6",children:[e("span",{class:"absolute inset-0 flex items-center justify-center",children:e("span",{class:"animate-ping inline-flex h-4 w-4 rounded-full bg-[#3b82f6] opacity-60"})}),e("span",{class:"relative inline-flex rounded-full h-4 w-4 bg-[#3b82f6] animate-pulse"})]})}):e(Y,{children:[e("div",{class:"grid grid-cols-7 gap-1 mb-2",children:w.map(t=>e("div",{class:"text-center text-gray-400 font-bold",children:t}))}),e("div",{class:"grid grid-cols-7 gap-1",children:[v.map((t,s)=>e("div",{},"b"+s)),y.map(t=>{const s=t.toISOString().slice(0,10),u=!!c[s],L=g(t,l),z=a&&g(t,a);return e("button",{class:`rounded-lg h-12 w-full flex flex-col items-center justify-center border transition-all
                    ${z?"bg-[#3b82f6] text-white border-[#3b82f6]":u?"bg-blue-100/10 text-[#3b82f6] border-[#3b82f6] hover:bg-[#3b82f6] hover:text-white":"bg-zinc-900 text-gray-200 border-zinc-700 hover:bg-zinc-700"}
                    ${L?"ring-2 ring-blue-400":""}
                  `,onClick:()=>h(u?t:null),children:[e("span",{class:"font-bold",children:t.getDate()}),u&&e("span",{class:"w-2 h-2 mt-1 rounded-full bg-[#3b82f6]"})]},s)})]}),a&&e("div",{class:"mt-8 bg-zinc-900 rounded-lg p-4",children:[e("h3",{class:"text-lg font-bold mb-2 text-white",children:["Eventos para el ",a.toLocaleDateString("es-AR")]}),c[a.toISOString().slice(0,10)]?.map(t=>e("div",{class:"mb-4 p-4 bg-zinc-800 rounded-lg border border-zinc-700",children:[e("h4",{class:"text-md font-bold text-primary",children:t.type}),e("p",{class:"text-gray-300",children:t.date}),t.youtubeLink&&e("a",{href:t.youtubeLink,target:"_blank",class:"text-primary block mb-2",children:"Ver mensaje en YouTube"}),t.pageLink&&e("a",{href:t.pageLink,target:"_blank",class:"text-primary block text-left",children:"Ver detalles"})]},t.id))]})]})]})}export{N as default};
