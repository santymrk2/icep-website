---
import Paths from "../data/routingPaths.js";
import { Image } from "astro:assets";
import logoImage from "../assets/Black.png";
import { Astronav, MenuItems, Dropdown, DropdownItems } from "astro-navbar";

const menuItems = Paths;
export const prerender = false;
---

<header
  class="relative h-24 text-black m-4 sm:m-10 rounded-full z-50"
  id="back-menu"
>
  <div
    class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-10 flex h-full text-base font-normal"
  >
    <!-- Navbar desktop -->
    <div class="flex justify-between items-center w-full">
      <div class="flex items-center m-2">
        <a href="/" class="flex items-center">
          <svg class="h-[4.5rem] fill-custom-blue" viewBox="0 0 800 800"
            ><defs></defs><path
              d="M400 331.69c28.41-20.36 63.23-32.34 100.85-32.34 25.46 0 49.64 5.49 71.42 15.35.71-6.37 1.09-12.84 1.09-19.4 0-95.74-77.61-173.35-173.35-173.35S226.66 199.56 226.66 295.3c0 6.56.38 13.03 1.09 19.4 21.78-9.86 45.96-15.35 71.42-15.35 37.62 0 72.43 11.99 100.85 32.34Z"
              class="cls-1"></path><path
              d="M572.27 314.7c-6.89 61.88-46.34 113.93-100.85 138.6.71 6.37 1.09 12.84 1.09 19.4 0 58.12-28.61 109.56-72.51 141.01 28.41 20.36 63.23 32.34 100.85 32.34 95.74 0 173.35-77.61 173.35-173.35 0-70.28-41.82-130.79-101.93-158Z"
              class="cls-1"></path><path
              d="M327.49 472.7c0-6.56.38-13.03 1.09-19.4-54.5-24.67-93.95-76.72-100.85-138.6-60.11 27.21-101.93 87.72-101.93 158 0 95.74 77.61 173.35 173.35 173.35 37.62 0 72.43-11.99 100.85-32.34-43.9-31.45-72.51-82.89-72.51-141.01ZM400 331.69c-38.94 27.9-65.84 71.54-71.42 121.61 21.78 9.86 45.96 15.35 71.42 15.35s49.64-5.49 71.42-15.35c-5.58-50.07-32.48-93.71-71.42-121.61Z"
              class="cls-1"></path>
          </svg>
        </a>
      </div>
      <div class="hidden lg:flex space-x-8 justify-center items-center m-2">
        <Astronav closeOnClick>
          <MenuItems class="flex space-x-4 g-4">
            {
              menuItems.map((item, index) =>
                item.subitems === undefined ? (
                  <a
                    href={item.href}
                    class="
                      bg-white
                      text-custom-blue
                      uppercase
                      no-underline
                      border-2
                      border-custom-blue
                      rounded-full
                      py-2
                      px-4
                      inline-flex
                      items-center
                      text-sm
                      font-bold
                      relative
                      z-10
                      transition-all
                      duration-500
                      ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      tracking-wide
                      font-sans
                      overflow-hidden
                      before:content-['']
                      before:absolute
                      before:top-0
                      before:right-0
                      before:w-0
                      before:h-full
                      before:bg-custom-blue
                      before:-z-10
                      before:transition-all
                      before:duration-500
                      before:ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      hover:before:w-full
                      hover:before:left-0
                      hover:before:right-auto
                      hover:text-white
                    "
                  >
                    {item.text}
                  </a>
                ) : (
                  <Dropdown class="relative">
                    <button
                      class="flex items-center space-x-1 bg-white
                      text-custom-blue
                      uppercase
                      no-underline
                      border-2
                      border-custom-blue
                      rounded-full
                      py-2
                      px-4
                      inline-flex
                      items-center
                      text-sm
                      font-bold
                      relative
                      z-10
                      transition-all
                      duration-500
                      ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      tracking-wide
                      font-sans
                      overflow-hidden
                      before:content-['']
                      before:absolute
                      before:top-0
                      before:right-0
                      before:w-0
                      before:h-full
                      before:bg-custom-blue
                      before:-z-10
                      before:transition-all
                      before:duration-500
                      before:ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      hover:before:w-full
                      hover:before:left-0
                      hover:before:right-auto
                      hover:text-white"
                    >
                      <span>{item.text}</span>
                      <svg
                        class="h-5 w-5 transform transition-transform duration-200"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 9l-7 7-7-7"
                        />
                      </svg>
                    </button>
                    <DropdownItems
                      class={`absolute top-12 -left-2 m-2 bg-white shadow-lg p-6  z-10 ring ring-2 ring-custom-blue hidden group-hover:block rounded-[2.2rem] motion-scale-in-[0.42] motion-translate-x-in-[2%] motion-translate-y-in-[-30%] motion-opacity-in-[0%]`}
                    >
                      <div class="flex flex-col items-center w-[12rem] space-y-2">
                        {Array.isArray(item.subitems) &&
                          item.subitems.map(
                            (subitem: { text: string; href: string }) => (
                              <a
                                href={subitem.href}
                                class="
                    inline-block
                    w-full
                    text-center
                      bg-white
                      text-custom-blue
                      uppercase
                      no-underline
                      border-2
                      border-custom-blue
                      rounded-full
                      py-2
                      px-2
                      items-center
                      text-sm
                      font-bold
                      relative
                      z-10
                      transition-all
                      duration-500
                      ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      tracking-wide
                      font-sans
                      overflow-hidden
                      before:content-['']
                      before:absolute
                      before:top-0
                      before:right-0
                      before:w-0
                      before:h-full
                      before:bg-custom-blue
                      before:-z-10
                      before:transition-all
                      before:duration-500
                      before:ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      hover:before:w-full
                      hover:before:left-0
                      hover:before:right-auto
                      hover:text-white
                    "
                              >
                                {subitem.text}
                              </a>
                            ),
                          )}
                      </div>
                    </DropdownItems>
                  </Dropdown>
                ),
              )
            }
          </MenuItems>
        </Astronav>
      </div>

      <button
        id="mobile-menu-button"
        class="lg:hidden m-2 lg:m-1 rounded-full group transition-all easy-in group inline-flex w-12 h-12 text-slate-800 bg-white text-center items-center justify-center transition"
        aria-pressed="false"
        onclick="this.setAttribute('aria-pressed', !(this.getAttribute('aria-pressed') === 'true'))"
      >
        <span class="sr-only">Menu</span>
        <svg
          class="size-8 fill-custom-blue pointer-events-none"
          viewBox="0 0 16 16"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect
            class="origin-center -translate-y-[5px] translate-x-[7px] transition-all duration-300 ease-[cubic-bezier(.5,.85,.25,1.1)] group-[[aria-pressed=true]]:translate-x-0 group-[[aria-pressed=true]]:translate-y-0 group-[[aria-pressed=true]]:rotate-[315deg]"
            y="7"
            width="9"
            height="2"
            rx="1"></rect>
          <rect
            class="origin-center transition-all duration-300 ease-[cubic-bezier(.5,.85,.25,1.8)] group-[[aria-pressed=true]]:rotate-45"
            y="7"
            width="16"
            height="2"
            rx="1"></rect>
          <rect
            class="origin-center translate-y-[5px] transition-all duration-300 ease-[cubic-bezier(.5,.85,.25,1.1)] group-[[aria-pressed=true]]:translate-y-0 group-[[aria-pressed=true]]:-rotate-[225deg]"
            y="7"
            width="9"
            height="2"
            rx="1"></rect>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile menu -->
  <div
    class="hidden lg:hidden text-white flex flex-col justify-center"
    id="mobile-menu"
  >
    <div class="gap-5 p-6 flex flex-col items-center">
      {
        menuItems.map((item) =>
          item.subitems === undefined ? (
            <a
              href={item.href}
              class="
                      w-8/12
                      inline-block
                      text-center
                      bg-white
                      text-custom-blue
                      uppercase
                      no-underline
                      border-2
                      border-custom-blue
                      rounded-full
                      py-2
                      px-4
                      items-center
                      text-sm
                      font-bold
                      relative
                      z-10
                      transition-all
                      duration-500
                      ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      tracking-wide
                      font-sans
                      overflow-hidden
                      before:content-['']
                      before:absolute
                      before:top-0
                      before:right-0
                      before:w-0
                      before:h-full
                      before:bg-custom-blue
                      before:-z-10
                      before:transition-all
                      before:duration-500
                      before:ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      hover:before:w-full
                      hover:before:left-0
                      hover:before:right-auto
                      hover:text-white
                    "
            >
              {item.text}
            </a>
          ) : (
            <Dropdown class="flex flex-col justify-center w-8/12  transition-all easy-in">
              <button
                class="
              block rounded-full text-custom-blue flex flex-row justify-center items-center
                      inline-block
                      text-center
                      bg-white
                      text-custom-blue
                      uppercase
                      no-underline
                      border-2
                      border-custom-blue
                      rounded-full
                      py-2
                      px-4
                      items-center
                      text-sm
                      font-bold
                      relative
                      z-10
                      transition-all
                      duration-500
                      ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      tracking-wide
                      font-sans
                      overflow-hidden
                      before:content-['']
                      before:absolute
                      before:top-0
                      before:right-0
                      before:w-0
                      before:h-full
                      before:bg-custom-blue
                      before:-z-10
                      before:transition-all
                      before:duration-500
                      before:ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      hover:before:w-full
                      hover:before:left-0
                      hover:before:right-auto
                      hover:text-white"
              >
                <span>{item.text}</span>
                <svg
                  class="h-5 w-5 transform transition-transform duration-200"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>
              <DropdownItems class="mt-5 p-4 ring ring-2 ring-custom-blue space-y-3 bg-white shadow-lg rounded-[1.5rem]  z-10 hidden group-hover:block flex flex-col justify-center motion-scale-in-[0.42] motion-translate-x-in-[2%] motion-translate-y-in-[-30%] motion-opacity-in-[0%]">
                {Array.isArray(item.subitems) &&
                  item.subitems.map(
                    (subitem: { text: string; href: string }) => (
                      <a
                        href={subitem.href}
                        class="
                    text-center
                      bg-white
                      text-custom-blue
                      uppercase
                      no-underline
                      border-2
                      border-custom-blue
                      rounded-full
                      py-2
                      px-4
                      block
                      items-center
                      text-sm
                      font-bold
                      relative
                      z-10
                      transition-all
                      duration-500
                      ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      tracking-wide
                      font-sans
                      overflow-hidden
                      before:content-['']
                      before:absolute
                      before:top-0
                      before:right-0
                      before:w-0
                      before:h-full
                      before:bg-custom-blue
                      before:-z-10
                      before:transition-all
                      before:duration-500
                      before:ease-[cubic-bezier(0.785,0.135,0.15,0.86)]
                      hover:before:w-full
                      hover:before:left-0
                      hover:before:right-auto
                      hover:text-white
                    "
                      >
                        {subitem.text}
                      </a>
                    ),
                  )}
              </DropdownItems>
            </Dropdown>
          ),
        )
      }
    </div>
  </div>
</header>

<script>
  const back = document.getElementById("back-menu");

  const button = document.getElementById("mobile-menu-button");
  const menu = document.getElementById("mobile-menu");

  button?.addEventListener("click", () => {
    menu?.classList.toggle("hidden");
    back?.classList.toggle("rounded-xl");
    back?.classList.toggle("transition-opacity");
    back?.classList.toggle("h-auto");
  });
</script>
